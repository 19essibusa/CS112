/* SongTester.h declares a test-class for class Song.
 * Student Name: Einstein Essibu
 * Date: 02/11/20
 * Begun by: Joel Adams, for CS 112 at Calvin University.
 */

#include "SongTester.h"
#include <iostream>
#include <cassert>
#include "Song.h"
#include <fstream>
using namespace std;
#include <string>

void SongTester::runTests()
{
	cout << "Testing class Song..." << endl;
	testConstructors();
	testReadFrom();
	cout << "All tests passed!" << endl;
}

void SongTester::testConstructors() {
	cout << "- constructors... " << flush;
	// default constructor
	Song s;
	assert( s.getTitle() == "" );
	assert( s.getArtist() == "" );
	assert( s.getYear() == 0 );
	cout << " 0 " << flush;
	// explicit constructor
	Song s1("Badge", "Cream", 1969);
	assert( s1.getTitle() == "Badge" );
	assert( s1.getArtist() == "Cream" );
	assert( s1.getYear() == 1969 );
	cout << " 1 " << flush;

	cout << "Passed!" << endl;
}

void SongTester::testReadFrom() {
	cout << "- readFrom()... " << flush;
	ifstream fin("testSongs.txt");
	assert( fin.is_open() );
	Song s;
	string separator;

	// read first song and separator in test playlist
	s.readFrom(fin);
	getline(fin, separator);
	assert( s.getTitle() == "Call Me Maybe" );
	assert( s.getArtist() == "Carly Rae Jepsen" );
	assert( s.getYear() == 2012 );
	cout << " 0 " << flush;

	// read second song and separator in test playlist
	s.readFrom(fin);
	getline(fin, separator);
	assert( s.getTitle() == "Let It Be" );
	assert( s.getArtist() == "The Beatles" );
	assert( s.getYear() == 1967 );
	cout << " 1 " << flush;

	// read third song and separator in test playlist
	s.readFrom(fin);
	getline(fin, separator);
	assert( s.getTitle() == "Let It Be" );
	assert( s.getArtist() == "Joan Baez" );
	assert( s.getYear() == 1971 );
	cout << " 2 " << flush;

	// read fourth song and separator in test playlist
	s.readFrom(fin);
	getline(fin, separator);
	assert( s.getTitle() == "Penny Lane" );
	assert( s.getArtist() == "The Beatles" );
	assert( s.getYear() == 1967 );
	cout << " 3 " << flush;

	fin.close();
	cout << "Passed!" << endl;
}

void SongTester::testOperator()
{
	cout << "operator" << flush;

	Song s1("Badge", "Cream", 1969);
	Song s2("Badge", "Cream", 1969);
	assert (s1 == s2);
	cout << "0" << flush;

	Song s3("Badge", "Cream", 1969);
	Song s4("Badges", "Cream", 1969);
	assert (!(s3 == s4));
	cout << "1" << flush;


	Song s5("Badge", "Cream", 1969);
	Song s6("Badge", "Creams", 1969);
	assert (!(s5 == s6));
	cout << "3" << flush;

	Song s7("Badge", "Cream", 1969);
	Song s8("Badge", "Cream", 1970);
	assert (s7 == s8);
	cout << "3" << flush;
}

